{% extends 'base.html' %}
{% load static %}

{% block content %}
<h2>Lost Items</h2>
<div>
    <form method="get" action="{% url 'home' %}">
        <label for="category">Filter by:</label>
        <select name="category" id="category">
            <option value= "all" {% if category == 'all' %}selected{% endif %}>All</option>
            <option value= "lost" {% if category == 'lost' %}selected{% endif %}>Lost</option>
            <option value= "found" {% if category == 'found' %}selected{% endif %}>Found</option>
        </select>
        <button type="submit">Filter</button>
    </form>
</div>
<div class="item-list">
    {% for item in items %}
    <div class="item">
        <h3><a href="{% url 'item_detail' item.id %}">{{ item.title }}</a></h3>
        <p>{{ item.description|truncatewords:30 }}</p>
        <p>Location: {{ item.location }}</p>
        <p>Category: {{ item.get_category_display }}</p>
        <p>Posted by: {{ item.posted_by.username }} {% if item.posted_by.profile.contact_number %}({{ item.posted_by.profile.contact_number }}){% endif %}</p>
        {% if item.image %}
            <img src="{{ item.image.url }}" alt="{{ item.title }}" style="max-width: 200px;">
        {% endif %}
    </div>
    {% empty %}
    <p>No items found.</p>
    {% endfor %}
</div>
{% endblock %}